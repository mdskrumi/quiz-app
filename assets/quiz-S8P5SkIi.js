import{j as e,G as j,r as m,c as v,a as b,u as g}from"./index-d5MxYY6w.js";import{u as N}from"./use-question-context-ZWAKS9zu.js";import{B as u}from"./button-ylCNdeNb.js";const y=({question:i,setResults:s,results:t,currentQuestion:c})=>{var o;return e.jsxs("div",{className:"mx-auto w-full",children:[e.jsx("div",{className:"mb-5 sm:mb-7 font-bold",children:`Question: ${i.question}`}),e.jsx("div",{className:"flex flex-col gap-3",children:(o=i.options)==null?void 0:o.map(n=>{var l;return e.jsx("div",{className:`border p-3 ${((l=t[c])==null?void 0:l.answered)===n.title?"border-primary-default border-4":""}`,onClick:()=>{s(t.map((r,d)=>d===c?{...r,answered:n.title,result:n.value}:r))},children:n.title},n.title)})})]})};function w(i){return j({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14.5c-3.59 0-6.5-2.91-6.5-6.5s2.91-6.5 6.5-6.5 6.5 2.91 6.5 6.5-2.91 6.5-6.5 6.5z"},child:[]},{tag:"path",attr:{d:"M10.5 4l-2.5 2.5-2.5-2.5-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 2.5-2.5 2.5 2.5 1.5-1.5-2.5-2.5 2.5-2.5z"},child:[]}]})(i)}const C=({children:i,description:s,title:t,handleConfirm:c,variant:o="primary",defaultOpen:n=!1,hideCancelButton:l=!1,onCancel:r,primaryButtonText:d="Confirm"})=>{const[x,a]=m.useState(n),h=m.useRef(null),p=document.getElementById("modal");return e.jsxs(e.Fragment,{children:[x?v.createPortal(e.jsxs("div",{onClick:f=>{f.stopPropagation(),h.current&&!h.current.contains(f.target)&&a(!1)},children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 z-10 backdrop-blur-sm bg-[#00000050] "}),e.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 m-auto max-h-[90vh] max-w-[95vw] overflow-auto",ref:h,children:[e.jsx("span",{className:"absolute top-3 right-3 duration-300 text-xl font-bold cursor-pointer hover:scale-110 px-2 z-10",onClick:()=>a(!1),children:e.jsx(w,{})}),e.jsxs("div",{className:"w-full max-w-sm rounded bg-surface p-3",children:[e.jsx("div",{children:e.jsx("p",{className:"mb-2 border-b pb-2 text-xl font-semibold",children:t})}),e.jsx("div",{children:s}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3 p-1",children:[!l&&e.jsx(u,{className:"h-auto w-fit p-2",type:"button",variant:"ghost",handleClick:()=>{a(!1),r&&typeof r=="function"&&r()},children:"Cancel"}),e.jsx(u,{type:"button",handleClick:()=>{c&&typeof c=="function"&&c(),a(!1)},className:"h-auto w-fit p-2",variant:o,children:d})]})]})]})]}),p):null,e.jsx("div",{onClick:()=>a(!0),children:i})]})},Q=()=>{const i=b(),{questions:s}=N(),{user:t,setUser:c}=g(),[o,n]=m.useState(!1),[l,r]=m.useState(0),[d,x]=m.useState([]);return m.useEffect(()=>{s&&x(s==null?void 0:s.map(a=>({question:a.question,result:0})))},[s]),e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("p",{children:`Hi! ${t==null?void 0:t.email}`}),o?e.jsx("h3",{className:"text-center mb-3",children:`Your Questions for the Quiz. ${l+1}/${s==null?void 0:s.length}`}):e.jsx("div",{className:"w-fit ml-auto flex gap-3",children:e.jsx(u,{variant:"danger",handleClick:()=>{c(null),i("/")},children:e.jsx("p",{className:"min-w-max",children:"Log out"})})}),s&&(s==null?void 0:s.length)>0?o?e.jsxs("div",{className:"grid grid-cols-1 gap-7 mt-7",children:[e.jsx(y,{question:s[l],currentQuestion:l,results:d,setResults:x}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(u,{className:"max-w-fit",variant:"secondary",disabled:l===0,handleClick:()=>r(a=>a-1),children:e.jsx("p",{children:"Previous Question"})}),e.jsx(u,{className:"max-w-fit",variant:"secondary",disabled:l===s.length-1,handleClick:()=>r(a=>a+1),children:e.jsx("p",{children:"Next Question"})})]}),l===s.length-1&&e.jsx(C,{title:"Submit Answers",description:"Are you sure you want to submit the answers? This action can not be undone.",handleConfirm:()=>{const a=JSON.parse(localStorage.getItem("savedResults"))||{};t&&t.email&&(a[t==null?void 0:t.email]?a[t==null?void 0:t.email].push(d):a[t==null?void 0:t.email]=[d]),localStorage.setItem("savedResults",JSON.stringify(a)),i("/quiz/results")},children:e.jsx(u,{children:"Submit"})})]}):e.jsxs("div",{className:"abs-center",children:[e.jsx("h3",{className:"mb-5",children:"Are you ready for the quiz?"}),e.jsx(u,{handleClick:()=>n(!0),className:"rounded-full p-10",children:e.jsx("h1",{className:"",children:"Ready"})})]}):e.jsx("div",{className:"text-center opacity-70 text-xl sm:text-2xl md:text-3xl abs-center",children:"You do not have any questions available now."})]})})};export{Q as default};
