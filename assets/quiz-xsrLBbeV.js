import{j as e,G as j,r as u,c as v,a as b,u as g}from"./index-u8xbBGD0.js";import{u as N}from"./use-question-context-pgDizof8.js";import{B as m}from"./button-sEAzYWy9.js";import{L as y}from"./logout-button-HI4v2NVM.js";const w=({question:n,setResults:t,results:s,currentQuestion:r})=>{var o;return e.jsxs("div",{className:"mx-auto w-full",children:[e.jsx("div",{className:"mb-5 sm:mb-7 font-bold",children:`Question: ${n.question}`}),e.jsx("div",{className:"flex flex-col gap-3",children:(o=n.options)==null?void 0:o.map(a=>{var c;return e.jsx("div",{className:`border p-3 ${((c=s[r])==null?void 0:c.answered)===a.title?"border-primary-default border-4":""}`,onClick:()=>{t(s.map((i,d)=>d===r?{...i,answered:a.title,result:a.value}:i))},children:a.title},a.title)})})]})};function z(n){return j({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14.5c-3.59 0-6.5-2.91-6.5-6.5s2.91-6.5 6.5-6.5 6.5 2.91 6.5 6.5-2.91 6.5-6.5 6.5z"},child:[]},{tag:"path",attr:{d:"M10.5 4l-2.5 2.5-2.5-2.5-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 2.5-2.5 2.5 2.5 1.5-1.5-2.5-2.5 2.5-2.5z"},child:[]}]})(n)}const C=({children:n,description:t,title:s,handleConfirm:r,variant:o="primary",defaultOpen:a=!1,hideCancelButton:c=!1,onCancel:i,primaryButtonText:d="Confirm"})=>{const[l,x]=u.useState(a),h=u.useRef(null),p=document.getElementById("modal");return e.jsxs(e.Fragment,{children:[l?v.createPortal(e.jsxs("div",{onClick:f=>{f.stopPropagation(),h.current&&!h.current.contains(f.target)&&x(!1)},children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 z-10 backdrop-blur-sm bg-[#00000050] "}),e.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 m-auto max-h-[90vh] max-w-[95vw] overflow-auto",ref:h,children:[e.jsx("span",{className:"absolute top-3 right-3 duration-300 text-xl font-bold cursor-pointer hover:scale-110 px-2 z-10",onClick:()=>x(!1),children:e.jsx(z,{})}),e.jsxs("div",{className:"w-full max-w-sm rounded bg-surface p-3",children:[e.jsx("div",{children:e.jsx("p",{className:"mb-2 border-b pb-2 text-xl font-semibold",children:s})}),e.jsx("div",{children:t}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3 p-1",children:[!c&&e.jsx(m,{className:"h-auto w-fit p-2",type:"button",variant:"ghost",handleClick:()=>{x(!1),i&&typeof i=="function"&&i()},children:"Cancel"}),e.jsx(m,{type:"button",handleClick:()=>{r&&typeof r=="function"&&r(),x(!1)},className:"h-auto w-fit p-2",variant:o,children:d})]})]})]})]}),p):null,e.jsx("div",{onClick:()=>x(!0),children:n})]})},I=()=>{const n=b(),{questions:t}=N(),{user:s}=g(),[r,o]=u.useState(!1),[a,c]=u.useState(0),[i,d]=u.useState([]);return u.useEffect(()=>{t&&d(t==null?void 0:t.map(l=>({question:l.question,result:0})))},[t]),e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("p",{children:`Hi! ${s==null?void 0:s.email}`}),r?e.jsx("h3",{className:"text-center mb-3",children:`Your Questions for the Quiz. ${a+1}/${t==null?void 0:t.length}`}):e.jsx("div",{className:"w-fit ml-auto flex gap-3",children:e.jsx(y,{})}),t&&(t==null?void 0:t.length)>0?r?e.jsxs("div",{className:"grid grid-cols-1 gap-7 mt-7",children:[e.jsx(w,{question:t[a],currentQuestion:a,results:i,setResults:d}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(m,{className:"max-w-fit",variant:"secondary",disabled:a===0,handleClick:()=>c(l=>l-1),children:e.jsx("p",{children:"Previous Question"})}),e.jsx(m,{className:"max-w-fit",variant:"secondary",disabled:a===t.length-1,handleClick:()=>c(l=>l+1),children:e.jsx("p",{children:"Next Question"})})]}),a===t.length-1&&e.jsx(C,{title:"Submit Answers",description:"Are you sure you want to submit the answers? This action can not be undone.",handleConfirm:()=>{const l=JSON.parse(localStorage.getItem("savedResults"))||{};s&&s.email&&(l[s==null?void 0:s.email]?l[s==null?void 0:s.email].push(i):l[s==null?void 0:s.email]=[i]),localStorage.setItem("savedResults",JSON.stringify(l)),n("/quiz-app/quiz/results")},children:e.jsx(m,{children:"Submit"})})]}):e.jsxs("div",{className:"abs-center",children:[e.jsx("h3",{className:"mb-5",children:"Are you ready for the quiz?"}),e.jsx(m,{handleClick:()=>o(!0),className:"rounded-full p-10",children:e.jsx("h1",{className:"",children:"Ready"})})]}):e.jsx("div",{className:"text-center opacity-70 text-xl sm:text-2xl md:text-3xl abs-center",children:"You do not have any questions available now."})]})})};export{I as default};
